import{L as m,r as i,o as R,I as p,d as j,e as N,h as Y,Q as s,f as g,B as h,aa as V,a5 as $,ab as _,aw as z,g as F}from"./BDkesJ-x.js";import{u as H}from"./C7HUDyTz.js";import{u as Q}from"./BbfgnpIe.js";import{u as M}from"./MuHLDO_N.js";import W from"./BcvwtPUr.js";import"./B0odRWjR.js";function Z(y){let n=Promise.resolve();const u=M("youtubePlayer",()=>({scriptInput:{src:"https://www.youtube.com/iframe_api",crossorigin:!1},scriptOptions:{use(){return{YT:window.YT||n.then(()=>window.YT)}}},clientInit:()=>{n=new Promise(e=>{window.onYouTubeIframeAPIReady=e})}}),y);{const e=m(u.status,c=>{c==="loading"&&(Q({link:[{rel:"preconnect",href:"https://www.youtube-nocookie.com"},{rel:"preconnect",href:"https://www.google.com"},{rel:"preconnect",href:"https://googleads.g.doubleclick.net"},{rel:"preconnect",href:"https://static.doubleclick.net"}]}),e())})}return u}const x={__name:"ScriptYouTubePlayer",props:{placeholderAttrs:{type:Object,required:!1},rootAttrs:{type:Object,required:!1},aboveTheFold:{type:Boolean,required:!1},trigger:{type:[String,Array,Boolean],required:!1,default:"mousedown"},videoId:{type:String,required:!0},playerVars:{type:null,required:!1,default:{autoplay:0,playsinline:1}},width:{type:Number,required:!1,default:640},height:{type:Number,required:!1,default:360},cookies:{type:Boolean,required:!1,default:!1},playerOptions:{type:null,required:!1},thumbnailSize:{type:String,required:!1,default:"hq720"},webp:{type:Boolean,required:!1,default:!0}},emits:["ready","state-change","playback-quality-change","playback-rate-change","error"],setup(y,{expose:n,emit:u}){const e=y,c=u,A=["onReady","onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange"],w=i(),b=i(),v=i(!1),a=H({trigger:e.trigger,el:w}),I=Z({scriptOptions:{trigger:a}}),{onLoaded:S,status:o}=I,d=i();let f=!1;e.trigger==="mousedown"&&a instanceof Promise&&a.then(t=>{t&&(f=!0)}),R(()=>{S(async t=>{const l=t.YT instanceof Promise?await t.YT:t.YT;await new Promise(r=>{typeof YT.Player>"u"?l.ready(r):r()}),d.value=new YT.Player(b.value,{host:e.cookies?"https://www.youtube.com":"https://www.youtube-nocookie.com",...e,...e.playerOptions,events:Object.fromEntries(A.map(r=>[r,C=>{var T;const O=r.replace(/([A-Z])/g,"-$1").replace("on-","").toLowerCase();c(O,C),r==="onReady"&&(v.value=!0,f&&((T=d.value)==null||T.playVideo(),f=!1),m(()=>e.videoId,()=>{var q;(q=d.value)==null||q.loadVideoById(e.videoId)}))}]))})}),m(o,t=>{t==="error"&&c("error")})}),n({player:d});const L=p(()=>$(e.rootAttrs,{"aria-busy":o.value==="loading","aria-label":o.value==="awaitingLoad"?"YouTube Player - Placeholder":o.value==="loading"?"YouTube Player - Loading":"YouTube Player - Loaded","aria-live":"polite",role:"application",style:{cursor:"pointer",position:"relative",backgroundColor:"black",width:"100%",aspectRatio:`${e.width}/${e.height}`},...a instanceof Promise?a.ssrAttrs||{}:{}})),B=p(()=>`https://i.ytimg.com/vi/${e.videoId}/hqdefault.jpg`),k=p(()=>`https://i.ytimg.com/${e.webp?"vi_webp":"vi"}/${e.videoId}/${e.thumbnailSize}.${e.webp?"webp":"jpg"}`),P=i(!1),E=p(()=>$(e.placeholderAttrs,{src:P.value?B.value:k.value,alt:"",loading:e.aboveTheFold?"eager":"lazy",style:{width:"100%",objectFit:"contain",height:"100%"},onLoad(t){const l=t.target;l.naturalWidth===120&&l.naturalHeight===90&&(P.value=!0)}}));return(t,l)=>(N(),j("div",V({ref_key:"rootEl",ref:w},L.value),[Y("div",{ref_key:"youtubeEl",ref:b,style:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}},null,512),v.value?g("",!0):s(t.$slots,"placeholder",{key:0,placeholder:k.value},()=>[Y("img",_(z(E.value)),null,16)]),h(o)==="loading"?s(t.$slots,"loading",{key:1},()=>[F(W)]):g("",!0),h(o)==="awaitingLoad"?s(t.$slots,"awaitingLoad",{key:2}):h(o)==="error"?s(t.$slots,"error",{key:3}):g("",!0),s(t.$slots,"default")],16))}};export{x as default};
