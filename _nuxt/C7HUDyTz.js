import{o as O,ah as C,aj as L,ae as P,L as S,H as w,I as x,af as p,U as A,B as T}from"./BDkesJ-x.js";function h(e){return L()?(P(e),!0):!1}const W=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const k=e=>e!=null,B=Object.prototype.toString,N=e=>B.call(e)==="[object Object]",b=()=>{};function v(e){return Array.isArray(e)?e:[e]}function R(e){return w()}function D(e,t=!0,o){R()?O(e,o):t?e():C(e)}function G(e,t,o){return S(e,t,{...o,immediate:!0})}const I=W?window:void 0;function g(e){var t;const o=p(e);return(t=o==null?void 0:o.$el)!=null?t:o}function V(...e){const t=[],o=()=>{t.forEach(n=>n()),t.length=0},u=(n,r,i,s)=>(n.addEventListener(r,i,s),()=>n.removeEventListener(r,i,s)),c=x(()=>{const n=v(p(e[0])).filter(r=>r!=null);return n.every(r=>typeof r!="string")?n:void 0}),d=G(()=>{var n,r;return[(r=(n=c.value)==null?void 0:n.map(i=>g(i)))!=null?r:[I].filter(i=>i!=null),v(p(c.value?e[1]:e[0])),v(T(c.value?e[2]:e[1])),p(c.value?e[3]:e[2])]},([n,r,i,s])=>{if(o(),!(n!=null&&n.length)||!(r!=null&&r.length)||!(i!=null&&i.length))return;const a=N(s)?{...s}:s;t.push(...n.flatMap(y=>r.flatMap(m=>i.map(f=>u(y,m,f,a)))))},{flush:"post"}),l=()=>{d(),o()};return h(o),l}function H(){const e=A(!1),t=w();return t&&O(()=>{e.value=!0},t),e}function U(e){const t=H();return x(()=>(t.value,!!e()))}function $(e,t,o={}){const{root:u,rootMargin:c="0px",threshold:d=0,window:l=I,immediate:n=!0}=o,r=U(()=>l&&"IntersectionObserver"in l),i=x(()=>{const f=p(e);return v(f).map(g).filter(k)});let s=b;const a=A(n),y=r.value?S(()=>[i.value,g(u),a.value],([f,j])=>{if(s(),!a.value||!f.length)return;const E=new IntersectionObserver(t,{root:g(j),rootMargin:c,threshold:d});f.forEach(M=>M&&E.observe(M)),s=()=>{E.disconnect(),s=b}},{immediate:n,flush:"post"}):b,m=()=>{s(),y(),a.value=!1};return h(m),{isSupported:r,isActive:a,pause(){s(),a.value=!1},resume(){a.value=!0},stop:m}}function q(e){let t;return new Promise(o=>{t=$(e,u=>{for(const c of u)c.isIntersecting&&o(!0)},{rootMargin:"30px 0px 0px 0px",threshold:0}),h(()=>o(!1))}).finally(()=>{t.stop()})}function F(e){const{el:t,trigger:o}=e,u=(Array.isArray(e.trigger)?e.trigger:[e.trigger]).filter(Boolean);if(!o||u.includes("immediate")||u.includes("onNuxtReady"))return"onNuxtReady";if(u.some(l=>["visibility","visible"].includes(l)))return t?q(t):new Promise(()=>{});const c={},d=new Promise(l=>{const n=typeof t<"u"?t:document.body,r=V(n,u,()=>{r(),l(!0)},{once:!0,passive:!0});D(()=>{S(n,i=>{i&&u.forEach(s=>{i.dataset[`script_${s}`]&&(r(),l(!0))})},{immediate:!0})}),h(()=>l(!1))});return Object.assign(d,{ssrAttrs:c})}export{F as u};
